import{r as a,d as T,c as k,a as o,w as i,e as d,v as r,t as u,F as V,o as g}from"./index-CXwEQRRF.js";import{a as y}from"./index-NIGUFBhG.js";const $={key:0},U={key:1},w="https://todolist-api.hexschool.io",D={__name:"TodoView",setup(f){const t=a({email:"",password:"",nickname:""}),m=a(""),b=async()=>{try{const e=await y.post(`${w}/users/sign_up`,t.value);console.log(e),m.value=e.data.uid}catch(e){console.log(e),m.value=e.response.data}},s=a({email:"",password:""}),v=a(""),x=async()=>{try{const e=await y.post(`${w}/users/sign_in`,s.value);console.log(e),v.value=e.data.token,document.cookie=`customTodoToken=${e.data.token};path=/`}catch(e){console.log(e),v.value=e.response.data}},p=a({status:"",uid:"",nickname:""});return T(async()=>{const e=document.cookie.replace(/(?:(?:^|.*;\s*)customTodoToken\s*\=\s*([^;]*).*$)|^.*$/,"$1");console.log(e);const l=await y.get(`${w}/users/checkout`,{headers:{Authorization:e}});console.log(l),p.value=l.data}),(e,l)=>(g(),k(V,null,[l[6]||(l[6]=o("h1",null,"代辦",-1)),l[7]||(l[7]=o("h2",null,"註冊功能",-1)),i(o("input",{type:"email",placeholder:"請輸入email","onUpdate:modelValue":l[0]||(l[0]=n=>t.value.email=n)},null,512),[[r,t.value.email]]),i(o("input",{type:"text",placeholder:"請輸入密碼","onUpdate:modelValue":l[1]||(l[1]=n=>t.value.password=n)},null,512),[[r,t.value.password]]),i(o("input",{type:"text",placeholder:"請輸入暱稱","onUpdate:modelValue":l[2]||(l[2]=n=>t.value.nickname=n)},null,512),[[r,t.value.nickname]]),l[8]||(l[8]=o("br",null,null,-1)),d(" "+u(t.value)+" ",1),l[9]||(l[9]=o("br",null,null,-1)),o("button",{onClick:b},"註冊"),l[10]||(l[10]=o("br",null,null,-1)),d(" "+u(m.value)+" ",1),l[11]||(l[11]=o("h2",null,"登入功能",-1)),i(o("input",{type:"email",placeholder:"請輸入email","onUpdate:modelValue":l[3]||(l[3]=n=>s.value.email=n)},null,512),[[r,s.value.email]]),i(o("input",{type:"text",placeholder:"請輸入密碼","onUpdate:modelValue":l[4]||(l[4]=n=>s.value.password=n)},null,512),[[r,s.value.password]]),l[12]||(l[12]=o("br",null,null,-1)),d(" "+u(s.value)+" ",1),l[13]||(l[13]=o("br",null,null,-1)),o("button",{onClick:x},"登入"),l[14]||(l[14]=o("br",null,null,-1)),d(" Token:"+u(v.value)+" ",1),l[15]||(l[15]=o("br",null,null,-1)),l[16]||(l[16]=o("h2",null,"驗證",-1)),p.value.uid?(g(),k("div",$,[o("p",null,"UID:"+u(p.value.uid),1),o("p",null,"暱稱:"+u(p.value.nickname),1)])):(g(),k("div",U,l[5]||(l[5]=[o("p",null,"請先登入",-1)])))],64))}};export{D as default};
